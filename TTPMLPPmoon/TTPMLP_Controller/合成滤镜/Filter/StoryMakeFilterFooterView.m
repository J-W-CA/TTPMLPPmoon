//
//  StoryMakeFilterFooterView.m
//  GetZSCStoryMaker
//
//  Created by whbalzac on 11/08/2017.
//  Copyright Â© 2017 makeupopular.com. All rights reserved.
//

#import "StoryMakeFilterFooterView.h"
#import "StoryMakeFooterFilterCell.h"
#import "StoryMakerFontManager.h"
#import "ImageUtil.h"
#import "ColorMatrix.h"

@interface StoryMakeFilterFooterView ()<UICollectionViewDataSource, UICollectionViewDelegate>

@property (nonatomic, strong) UIImageView *drawImgView;
@property (nonatomic, strong) UIImage *currentImage;
@property (nonatomic, strong) UIButton *cancelBtn;
@property (nonatomic, strong) UIButton *confirmBtn;

@property (nonatomic, strong) UICollectionView   *collectionView;
@property (nonatomic, strong) UICollectionViewFlowLayout *flowLayout;
//@property (nonatomic, strong) NSArray <UIImage *> *dataArray;
@property (nonatomic, strong) NSMutableArray <UIColor *> *dataArray;
//@property (nonatomic, strong) NSArray <NSString *> *filterNameArray;

@property (nonatomic, assign) NSInteger currentCellIndex;

@end

@implementation StoryMakeFilterFooterView

- (instancetype)init
{
    self = [super init];
    if (self) {
        [self configureView];
    }
    return self;
}

- (void)configureView
{
    [self addSubview:self.drawImgView];
    [self.drawImgView mas_makeConstraints:^(MASConstraintMaker *make) {
        make.edges.mas_equalTo(self);
    }];
    
    [self addSubview:self.collectionView];
    [self.collectionView mas_makeConstraints:^(MASConstraintMaker *make) {
        make.left.right.bottom.mas_equalTo(self);
        make.height.mas_equalTo(SCREENAPPLYHEIGHT(100));
    }];
    
    [self addSubview:self.cancelBtn];
    [self.cancelBtn mas_makeConstraints:^(MASConstraintMaker *make) {
        make.centerY.mas_equalTo(self.mas_top).offset(SCREENAPPLYHEIGHT(31));
        make.left.mas_equalTo(self.mas_left).offset(SCREENAPPLYHEIGHT(10));
        make.height.mas_equalTo(SCREENAPPLYHEIGHT(48));
        make.width.mas_equalTo(SCREENAPPLYHEIGHT(70));
    }];
    
    [self addSubview:self.confirmBtn];
    [self.confirmBtn mas_makeConstraints:^(MASConstraintMaker *make) {
        make.centerY.mas_equalTo(self.mas_top).offset(SCREENAPPLYHEIGHT(31));
        make.right.mas_equalTo(self.mas_right).offset(-SCREENAPPLYHEIGHT(6));
        make.height.mas_equalTo(SCREENAPPLYHEIGHT(48));
        make.width.mas_equalTo(SCREENAPPLYHEIGHT(60));
    }];
}

- (void)configureData:(UIImage *)image
{
    
    self.currentImage = image;
    
    self.currentCellIndex = 0;
    
      self.dataArray = [[NSMutableArray alloc] initWithObjects:[UIColor clearColor], nil];
    
     NSArray *colorCBCC = @[
                        RGBA(239,239,213,0.5),

                        RGBA(240,233,197,0.5),

                        RGBA(242,225,149,0.5),

                        RGBA(239,215,98,0.5),

                        RGBA(240,221,123,0.5),

                        RGBA(242,237,216,0.5),
                        
                        RGBA(239,239,213,0.5),
                        
                        RGBA(244,234,198,0.5),
                        
                        RGBA(251,227,147,0.5),
                        
                        RGBA(249,216,99,0.5),
                        
                        RGBA(251,221,121,0.5),
                        
                        RGBA(243,227,169,0.5),
                        
                        RGBA(226,214,181,0.5),
                        
                        RGBA(233,214,159,0.5),
                        
                        RGBA(227,201,113,0.5),
                        
                        RGBA(190,173,93,0.5),
                        
                        RGBA(228,195,88,0.5),
                        
                        RGBA(228,206,134,0.5),
                        
                        RGBA(197,186,157,0.5),
                        
                        RGBA(200,184,139,0.5),
                        
                        RGBA(175,152,96,0.5),
                        
                        RGBA(128,110,69,0.5),
                        
                        RGBA(150,130,85,0.5),
                        
                        RGBA(198,176,114,0.5),
                        
                        RGBA(172,162,137,0.5),
                        
                        RGBA(174,157,117,0.5),
                        
                        RGBA(129,116,87,0.5),
                        
                        RGBA(85,73,54,0.5),
                        
                        RGBA(110,96,72,0.5),
                        
                        RGBA(151,137,103,0.5),
                        
                        RGBA(243,235,213,0.5),
                        
                        RGBA(241,227,191,0.5),
                        
                        RGBA(254,221,143,0.5),
                        
                        RGBA(252,203,99,0.5),
                        
                        RGBA(255,216,125,0.5),
                        
                        RGBA(248,225,169,0.5),
                        
                        RGBA(228,213,179,0.5),
                        
                        RGBA(232,209,156,0.5),
                        
                        RGBA(241,201,116,0.5),
                        
                        RGBA(206,169,93,0.5),
                        
                        RGBA(238,193,89,0.5),
                        
                        RGBA(229,198,130,0.5),
                        
                        RGBA(198,184,156,0.5),
                        
                        RGBA(200,178,134,0.5),
                        
                        RGBA(176,148,97,0.5),
                        
                        RGBA(132,105,66,0.5),
                        
                        RGBA(153,125,81,0.5),
                        
                        RGBA(200,171,112,0.5),
                        
                        RGBA(199,182,155,0.5),
                        
                        RGBA(203,175,135,0.5),
                        
                        RGBA(184,147,100,0.5),
                        
                        RGBA(136,104,69,0.5),
                        
                        RGBA(156,122,80,0.5),
                        
                        RGBA(208,170,114,0.5),
                        
                        RGBA(243,232,209,0.5),
                        
                        RGBA(249,228,190,0.5),
                        
                        RGBA(255,212,141,0.5),
                        
                        RGBA(255,199,102,0.5),
                        
                        RGBA(255,206,124,0.5),
                        
                        RGBA(253,222,170,0.5),
                        
                        RGBA(229,210,176,0.5),
                        
                        RGBA(232,202,153,0.5),
                        
                        RGBA(245,190,110,0.5),
                        
                        RGBA(213,155,78,0.5),
                        
                        RGBA(246,183,92,0.5),
                        
                        RGBA(235,193,130,0.5),
                        
                        RGBA(246,232,208,0.5),
                        
                        RGBA(249,225,190,0.5),
                        
                        RGBA(255,204,141,0.5),
                        
                        RGBA(255,184,102,0.5),
                        
                        RGBA(255,195,120,0.5),
                        
                        RGBA(253,215,161,0.5),
                        
                        RGBA(243,228,205,0.5),
                        
                        RGBA(250,224,193,0.5),
                        
                        RGBA(255,195,138,0.5),
                        
                        RGBA(255,171,100,0.5),
                        
                        RGBA(255,183,118,0.5),
                        
                        RGBA(252,208,166,0.5),
                        
                        RGBA(231,206,178,0.5),
                        
                        RGBA(239,194,151,0.5),
                        
                        RGBA(244,170,110,0.5),
                        
                        RGBA(212,136,79,0.5),
                        
                        RGBA(241,158,93,0.5),
                        
                        RGBA(239,180,129,0.5),
                        
                        RGBA(209,184,159,0.5),
                        
                        RGBA(210,170,135,0.5),
                        
                        RGBA(185,136,97,0.5),
                        
                        RGBA(137,98,71,0.5),
                        
                        RGBA(165,117,83,0.5),
                        
                        RGBA(212,156,112,0.5),
                        
                        RGBA(182,158,136,0.5),
                        
                        RGBA(184,145,113,0.5),
                        
                        RGBA(137,105,81,0.5),
                        
                        RGBA(95,70,55,0.5),
                        
                        RGBA(116,90,68,0.5),
                        
                        RGBA(163,128,100,0.5),
                        
                        RGBA(242,224,206,0.5),
                        
                        RGBA(248,221,200,0.5),
                        
                        RGBA(255,182,145,0.5),
                        
                        RGBA(253,151,104,0.5),
                        
                        RGBA(254,168,124,0.5),
                        
                        RGBA(252,198,168,0.5),
                        
                        RGBA(232,201,179,0.5),
                        
                        RGBA(239,186,156,0.5),
                        
                        RGBA(244,157,114,0.5),
                        
                        RGBA(213,135,100,0.5),
                        
                        RGBA(240,143,96,0.5),
                        
                        RGBA(242,170,134,0.5),
                        
                        RGBA(204,175,156,0.5),
                        
                        RGBA(208,160,134,0.5),
                        
                        RGBA(187,127,100,0.5),
                        
                        RGBA(137,90,70,0.5),
                        
                        RGBA(161,107,83,0.5),
                        
                        RGBA(212,147,116,0.5),
                        
                        RGBA(181,155,139,0.5),
                        
                        RGBA(188,143,121,0.5),
                        
                        RGBA(139,104,87,0.5),
                        
                        RGBA(94,64,52,0.5),
                        
                        RGBA(120,87,71,0.5),
                        
                        RGBA(162,121,102,0.5),
                        
                        RGBA(241,224,212,0.5),
                        
                        RGBA(249,218,202,0.5),
                        
                        RGBA(253,178,156,0.5),
                        
                        RGBA(252,144,116,0.5),
                        
                        RGBA(250,157,134,0.5),
                        
                        RGBA(248,195,175,0.5),
                        
                        RGBA(232,200,185,0.5),
                        
                        RGBA(236,183,165,0.5),
                        
                        RGBA(234,146,123,0.5),
                        
                        RGBA(199,107,87,0.5),
                        
                        RGBA(234,130,103,0.5),
                        
                        RGBA(237,168,145,0.5),
                        
                        RGBA(204,177,165,0.5),
                        
                        RGBA(205,159,143,0.5),
                        
                        RGBA(181,121,105,0.5),
                        
                        RGBA(133,85,73,0.5),
                        
                        RGBA(157,102,89,0.5),
                        
                        RGBA(210,142,124,0.5),
                        
                        RGBA(176,152,142,0.5),
                        
                        RGBA(185,140,126,0.5),
                        
                        RGBA(139,100,89,0.5),
                        
                        RGBA(90,62,55,0.5),
                        
                        RGBA(117,82,72,0.5),
                        
                        RGBA(157,117,105,0.5),
                        
                        RGBA(240,226,219,0.5),
                        
                        RGBA(244,218,210,0.5),
                        
                        RGBA(247,177,170,0.5),
                        
                        RGBA(237,133,129,0.5),
                        
                        RGBA(246,158,152,0.5),
                        
                        RGBA(248,198,190,0.5),
                        
                        RGBA(227,203,198,0.5),
                        
                        RGBA(227,182,175,0.5),
                        
                        RGBA(229,147,140,0.5),
                        
                        RGBA(170,101,96,0.5),
                        
                        RGBA(198,122,119,0.5),
                        
                        RGBA(223,160,154,0.5),
                        
                        RGBA(197,173,166,0.5),
                        
                        RGBA(202,156,150,0.5),
                        
                        RGBA(173,116,112,0.5),
                        
                        RGBA(123,79,77,0.5),
                        
                        RGBA(149,99,95,0.5),
                        
                        RGBA(199,138,133,0.5),
                        
                        RGBA(172,152,148,0.5),
                        
                        RGBA(176,135,130,0.5),
                        
                        RGBA(130,96,93,0.5),
                        
                        RGBA(99,61,60,0.5),
                        
                        RGBA(110,79,77,0.5),
                        
                        RGBA(152,115,112,0.5),
                        
                        RGBA(234,223,223,0.5),
                        
                        RGBA(239,218,217,0.5),
                        
                        RGBA(240,180,190,0.5),
                        
                        RGBA(228,136,151,0.5),
                        
                        RGBA(237,160,173,0.5),
                        
                        RGBA(238,198,202,0.5),
                        
                        RGBA(220,201,201,0.5),
                        
                        RGBA(219,181,186,0.5),
                        
                        RGBA(215,141,153,0.5),
                        
                        RGBA(161,97,107,0.5),
                        
                        RGBA(190,119,131,0.5),
                        
                        RGBA(221,166,174,0.5),
                        
                        RGBA(196,176,178,0.5),
                        
                        RGBA(195,159,164,0.5),
                        
                        RGBA(167,118,127,0.5),
                        
                        RGBA(120,79,85,0.5),
                        
                        RGBA(143,97,105,0.5),
                        
                        RGBA(193,140,150,0.5),
                        
                        RGBA(171,153,155,0.5),
                        
                        RGBA(171,137,142,0.5),
                        
                        RGBA(128,95,100,0.5),
                        
                        RGBA(81,56,55,0.5),
                        
                        RGBA(105,76,82,0.5),
                        
                        RGBA(147,115,121,0.5),
                        
                        RGBA(237,229,230,0.5),
                        
                        RGBA(236,218,220,0.5),
                        
                        RGBA(228,182,205,0.5),
                        
                        RGBA(209,149,182,0.5),
                        
                        RGBA(230,166,200,0.5),
                        
                        RGBA(235,205,218,0.5),
                        
                        RGBA(220,205,211,0.5),
                        
                        RGBA(217,185,200,0.5),
                        
                        RGBA(209,149,182,0.5),
                        
                        RGBA(153,102,129,0.5),
                        
                        RGBA(180,123,153,0.5),
                        
                        RGBA(215,171,192,0.5),
                        
                        RGBA(191,177,184,0.5),
                        
                        RGBA(191,164,178,0.5),
                        
                        RGBA(161,119,140,0.5),
                        
                        RGBA(116,80,99,0.5),
                        
                        RGBA(136,98,119,0.5),
                        
                        RGBA(190,145,168,0.5),
                        
                        RGBA(165,151,159,0.5),
                        
                        RGBA(160,136,151,0.5),
                        
                        RGBA(122,97,112,0.5),
                        
                        RGBA(73,54,66,0.5),
                        
                        RGBA(100,75,88,0.5),
                        
                        RGBA(141,116,130,0.5),
                        
                        RGBA(230,223,227,0.5),
                        
                        RGBA(232,223,230,0.5),
                        
                        RGBA(219,187,216,0.5),
                        
                        RGBA(190,134,188,0.5),
                        
                        RGBA(201,156,198,0.5),
                        
                        RGBA(226,204,223,0.5),
                        
                        RGBA(215,206,215,0.5),
                        
                        RGBA(207,188,206,0.5),
                        
                        RGBA(201,157,198,0.5),
                        
                        RGBA(146,104,142,0.5),
                        
                        RGBA(169,129,170,0.5),
                        
                        RGBA(204,172,201,0.5),
                        
                        RGBA(228,224,227,0.5),
                        
                        RGBA(228,223,230,0.5),
                        
                        RGBA(201,184,220,0.5),
                        
                        RGBA(147,111,171,0.5),
                        
                        RGBA(184,160,210,0.5),
                        
                        RGBA(216,207,227,0.5),
                        
                        RGBA(210,207,216,0.5),
                        
                        RGBA(200,191,213,0.5),
                        
                        RGBA(184,160,211,0.5),
                        
                        RGBA(138,110,154,0.5),
                        
                        RGBA(157,131,178,0.5),
                        
                        RGBA(195,176,208,0.5),
                        
                        RGBA(204,202,205,0.5),
                        
                        RGBA(175,165,190,0.5),
                        
                        RGBA(144,127,161,0.5),
                        
                        RGBA(100,83,112,0.5),
                        
                        RGBA(126,106,139,0.5),
                        
                        RGBA(169,151,185,0.5),
                        
                        RGBA(160,155,167,0.5),
                        
                        RGBA(155,144,166,0.5),
                        
                        RGBA(110,101,123,0.5),
                        
                        RGBA(69,58,76,0.5),
                        
                        RGBA(89,77,97,0.5),
                        
                        RGBA(132,122,143,0.5),
                        
                        RGBA(231,231,233,0.5),
                        
                        RGBA(220,221,229,0.5),
                        
                        RGBA(193,197,227,0.5),
                        
                        RGBA(125,120,182,0.5),
                        
                        RGBA(166,166,217,0.5),
                        
                        RGBA(205,209,229,0.5),
                        
                        RGBA(205,207,217,0.5),
                        
                        RGBA(193,196,221,0.5),
                        
                        RGBA(167,166,218,0.5),
                        
                        RGBA(118,114,162,0.5),
                        
                        RGBA(142,139,187,0.5),
                        
                        RGBA(180,183,219,0.5),
                        
                        RGBA(181,183,194,0.5),
                        
                        RGBA(166,168,194,0.5),
                        
                        RGBA(129,131,168,0.5),
                        
                        RGBA(84,84,119,0.5),
                        
                        RGBA(106,106,143,0.5),
                        
                        RGBA(155,155,192,0.5),
                        
                        RGBA(158,158,170,0.5),
                        
                        RGBA(135,147,169,0.5),
                        
                        RGBA(97,107,129,0.5),
                        
                        RGBA(55,63,83,0.5),
                        
                        RGBA(74,83,106,0.5),
                        
                        RGBA(111,124,148,0.5),
                        
                        RGBA(225,229,231,0.5),
                        
                        RGBA(218,226,234,0.5),
                        
                        RGBA(184,202,230,0.5),
                        
                        RGBA(118,148,208,0.5),
                        
                        RGBA(146,171,220,0.5),
                        
                        RGBA(197,212,232,0.5),
                        
                        RGBA(209,215,221,0.5),
                        
                        RGBA(193,198,221,0.5),
                        
                        RGBA(124,145,195,0.5),
                        
                        RGBA(78,98,144,0.5),
                        
                        RGBA(101,122,169,0.5),
                        
                        RGBA(165,185,219,0.5),
                        
                        RGBA(175,184,197,0.5),
                        
                        RGBA(158,170,194,0.5),
                        
                        RGBA(119,136,170,0.5),
                        
                        RGBA(80,92,127,0.5),
                        
                        RGBA(99,115,151,0.5),
                        
                        RGBA(140,158,193,0.5),
                        
                        RGBA(223,230,231,0.5),
                        
                        RGBA(211,225,232,0.5),
                        
                        RGBA(164,200,229,0.5),
                        
                        RGBA(85,143,197,0.5),
                        
                        RGBA(133,178,220,0.5),
                        
                        RGBA(188,214,231,0.5),
                        
                        RGBA(193,211,219,0.5),
                        
                        RGBA(170,203,220,0.5),
                        
                        RGBA(100,155,191,0.5),
                        
                        RGBA(60,108,144,0.5),
                        
                        RGBA(76,131,166,0.5),
                        
                        RGBA(148,191,217,0.5),
                        
                        RGBA(222,230,232,0.5),
                        
                        RGBA(211,228,233,0.5),
                        
                        RGBA(155,202,228,0.5),
                        
                        RGBA(88,171,217,0.5),
                        
                        RGBA(131,192,229,0.5),
                        
                        RGBA(183,216,231,0.5),
                        
                        RGBA(198,210,218,0.5),
                        
                        RGBA(174,199,217,0.5),
                        
                        RGBA(109,150,194,0.5),
                        
                        RGBA(72,104,146,0.5),
                        
                        RGBA(86,125,171,0.5),
                        
                        RGBA(155,188,221,0.5),
                        
                        RGBA(170,186,195,0.5),
                        
                        RGBA(146,175,194,0.5),
                        
                        RGBA(101,142,170,0.5),
                        
                        RGBA(65,98,124,0.5),
                        
                        RGBA(85,121,148,0.5),
                        
                        RGBA(123,164,189,0.5),
                        
                        RGBA(144,159,169,0.5),
                        
                        RGBA(123,149,170,0.5),
                        
                        RGBA(87,109,127,0.5),
                        
                        RGBA(47,65,80,0.5),
                        
                        RGBA(66,89,107,0.5),
                        
                        RGBA(103,129,148,0.5),
                        
                        RGBA(222,234,233,0.5),
                        
                        RGBA(206,230,232,0.5),
                        
                        RGBA(143,209,221,0.5),
                        
                        RGBA(62,179,203,0.5),
                        
                        RGBA(113,202,219,0.5),
                        
                        RGBA(176,221,227,0.5),
                        
                        RGBA(221,232,231,0.5),
                        
                        RGBA(206,227,230,0.5),
                        
                        RGBA(153,211,229,0.5),
                        
                        RGBA(69,173,206,0.5),
                        
                        RGBA(121,196,219,0.5),
                        
                        RGBA(184,223,232,0.5),
                        
                        RGBA(190,211,216,0.5),
                        
                        RGBA(166,205,218,0.5),
                        
                        RGBA(105,183,209,0.5),
                        
                        RGBA(64,135,163,0.5),
                        
                        RGBA(91,158,185,0.5),
                        
                        RGBA(139,194,212,0.5),
                        
                        RGBA(195,213,215,0.5),
                        
                        RGBA(160,204,211,0.5),
                        
                        RGBA(103,189,207,0.5),
                        
                        RGBA(63,139,159,0.5),
                        
                        RGBA(82,160,179,0.5),
                        
                        RGBA(132,197,210,0.5),
                        
                        RGBA(167,184,187,0.5),
                        
                        RGBA(138,177,187,0.5),
                        
                        RGBA(96,149,165,0.5),
                        
                        RGBA(61,105,119,0.5),
                        
                        RGBA(74,126,142,0.5),
                        
                        RGBA(117,173,187,0.5),
                        
                        RGBA(139,158,163,0.5),
                        
                        RGBA(120,156,166,0.5),
                        
                        RGBA(83,114,124,0.5),
                        
                        RGBA(48,72,80,0.5),
                        
                        RGBA(65,92,101,0.5),
                        
                        RGBA(103,135,146,0.5),
                        
                        RGBA(208,218,219,0.5),
                        
                        RGBA(179,189,192,0.5),
                        
                        RGBA(124,141,147,0.5),
                        
                        RGBA(89,104,109,0.5),
                        
                        RGBA(106,122,128,0.5),
                        
                        RGBA(142,160,167,0.5),
                        
                        RGBA(222,234,230,0.5),
                        
                        RGBA(207,231,229,0.5),
                        
                        RGBA(156,224,218,0.5),
                        
                        RGBA(54,189,180,0.5),
                        
                        RGBA(106,197,191,0.5),
                        
                        RGBA(183,226,220,0.5),
                        
                        RGBA(194,216,213,0.5),
                        
                        RGBA(163,206,203,0.5),
                        
                        RGBA(107,197,191,0.5),
                        
                        RGBA(65,144,140,0.5),
                        
                        RGBA(90,170,165,0.5),
                        
                        RGBA(136,202,197,0.5),
                        
                        RGBA(167,187,185,0.5),
                        
                        RGBA(140,181,178,0.5),
                        
                        RGBA(97,154,152,0.5),
                        
                        RGBA(58,109,107,0.5),
                        
                        RGBA(75,130,128,0.5),
                        
                        RGBA(114,175,171,0.5),
                        
                        RGBA(144,163,162,0.5),
                        
                        RGBA(121,158,156,0.5),
                        
                        RGBA(83,117,117,0.5),
                        
                        RGBA(19,78,70,0.5),
                        
                        RGBA(68,96,96,0.5),
                        
                        RGBA(101,137,137,0.5),
                        
                        RGBA(228,236,226,0.5),
                        
                        RGBA(214,234,222,0.5),
                        
                        RGBA(163,225,196,0.5),
                        
                        RGBA(94,191,155,0.5),
                        
                        RGBA(121,202,170,0.5),
                        
                        RGBA(191,231,210,0.5),
                        
                        RGBA(199,217,206,0.5),
                        
                        RGBA(173,211,193,0.5),
                        
                        RGBA(118,203,178,0.5),
                        
                        RGBA(74,144,120,0.5),
                        
                        RGBA(94,171,144,0.5),
                        
                        RGBA(152,206,182,0.5),
                        
                        RGBA(170,191,180,0.5),
                        
                        RGBA(147,182,167,0.5),
                        
                        RGBA(99,153,132,0.5),
                        
                        RGBA(62,106,91,0.5),
                        
                        RGBA(82,129,113,0.5),
                        
                        RGBA(123,180,157,0.5),
                        
                        RGBA(151,167,161,0.5),
                        
                        RGBA(124,159,145,0.5),
                        
                        RGBA(88,117,106,0.5),
                        
                        RGBA(48,73,65,0.5),
                        
                        RGBA(67,95,86,0.5),
                        
                        RGBA(104,136,124,0.5),
                        
                        RGBA(231,236,226,0.5),
                        
                        RGBA(223,235,217,0.5),
                        
                        RGBA(176,221,177,0.5),
                        
                        RGBA(136,209,142,0.5),
                        
                        RGBA(159,214,160,0.5),
                        
                        RGBA(199,230,198,0.5),
                        
                        RGBA(199,214,198,0.5),
                        
                        RGBA(180,210,181,0.5),
                        
                        RGBA(142,197,148,0.5),
                        
                        RGBA(97,143,105,0.5),
                        
                        RGBA(117,170,123,0.5),
                        
                        RGBA(162,202,164,0.5),
                        
                        RGBA(174,189,175,0.5),
                        
                        RGBA(158,184,158,0.5),
                        
                        RGBA(119,156,123,0.5),
                        
                        RGBA(78,109,84,0.5),
                        
                        RGBA(96,129,101,0.5),
                        
                        RGBA(135,176,141,0.5),
                        
                        RGBA(149,163,149,0.5),
                        
                        RGBA(135,159,136,0.5),
                        
                        RGBA(92,115,97,0.5),
                        
                        RGBA(47,75,55,0.5),
                        
                        RGBA(76,96,79,0.5),
                        
                        RGBA(112,136,116,0.5),
                        
                        RGBA(211,218,210,0.5),
                        
                        RGBA(181,190,184,0.5),
                        
                        RGBA(124,143,137,0.5),
                        
                        RGBA(90,106,101,0.5),
                        
                        RGBA(106,123,117,0.5),
                        
                        RGBA(148,165,155,0.5),
                        
                        RGBA(231,234,219,0.5),
                        
                        RGBA(226,233,208,0.5),
                        
                        RGBA(196,220,163,0.5),
                        
                        RGBA(172,207,120,0.5),
                        
                        RGBA(180,213,141,0.5),
                        
                        RGBA(210,224,185,0.5),
                        
                        RGBA(208,214,194,0.5),
                        
                        RGBA(190,207,172,0.5),
                        
                        RGBA(167,198,131,0.5),
                        
                        RGBA(118,143,93,0.5),
                        
                        RGBA(138,168,109,0.5),
                        
                        RGBA(174,198,148,0.5),
                        
                        RGBA(176,186,168,0.5),
                        
                        RGBA(168,184,149,0.5),
                        
                        RGBA(131,152,110,0.5),
                        
                        RGBA(92,106,75,0.5),
                        
                        RGBA(111,128,94,0.5),
                        
                        RGBA(152,174,128,0.5),
                        
                        RGBA(159,169,150,0.5),
                        
                        RGBA(143,158,127,0.5),
                        
                        RGBA(105,118,94,0.5),
                        
                        RGBA(67,76,59,0.5),
                        
                        RGBA(86,97,76,0.5),
                        
                        RGBA(122,135,109,0.5),
                        
                        RGBA(217,219,206,0.5),
                        
                        RGBA(187,191,180,0.5),
                        
                        RGBA(134,142,126,0.5),
                        
                        RGBA(97,105,92,0.5),
                        
                        RGBA(116,123,111,0.5),
                        
                        RGBA(159,164,145,0.5),
                        
                        RGBA(239,239,219,0.5),
                        
                        RGBA(231,233,206,0.5),
                        
                        RGBA(217,223,154,0.5),
                        
                        RGBA(203,211,109,0.5),
                        
                        RGBA(210,216,130,0.5),
                        
                        RGBA(229,233,181,0.5),
                        
                        RGBA(216,218,191,0.5),
                        
                        RGBA(210,213,165,0.5),
                        
                        RGBA(192,198,119,0.5),
                        
                        RGBA(143,144,86,0.5),
                        
                        RGBA(163,169,100,0.5),
                        
                        RGBA(198,204,140,0.5),
                        
                        RGBA(187,191,169,0.5),
                        
                        RGBA(177,180,141,0.5),
                        
                        RGBA(150,153,105,0.5),
                        
                        RGBA(106,108,73,0.5),
                        
                        RGBA(124,126,84,0.5),
                        
                        RGBA(172,178,123,0.5),
                        
                        RGBA(160,163,142,0.5),
                        
                        RGBA(159,162,124,0.5),
                        
                        RGBA(113,116,87,0.5),
                        
                        RGBA(77,78,53,0.5),
                        
                        RGBA(97,99,75,0.5),
                        
                        RGBA(135,138,104,0.5),
                        
                        RGBA(238,234,216,0.5),
                        
                        RGBA(239,237,200,0.5),
                        
                        RGBA(237,237,151,0.5),
                        
                        RGBA(232,220,102,0.5),
                        
                        RGBA(235,225,125,0.5),
                        
                        RGBA(238,233,176,0.5),
                        
                        RGBA(218,215,184,0.5),
                        
                        RGBA(217,212,161,0.5),
                        
                        RGBA(209,200,111,0.5),
                        
                        RGBA(156,146,83,0.5),
                        
                        RGBA(182,171,95,0.5),
                        
                        RGBA(213,205,135,0.5),
                        
                        RGBA(190,187,161,0.5),
                        
                        RGBA(190,185,138,0.5),
                        
                        RGBA(162,154,101,0.5),
                        
                        RGBA(121,112,73,0.5),
                        
                        RGBA(141,133,88,0.5),
                        
                        RGBA(186,179,119,0.5),
                        
                        RGBA(168,164,141,0.5),
                        
                        RGBA(162,157,120,0.5),
                        
                        RGBA(123,119,90,0.5),
                        
                        RGBA(80,75,54,0.5),
                        
                        RGBA(104,98,75,0.5),
                        
                        RGBA(145,140,105,0.5),
                        
                        RGBA(218,217,213,0.5),
                        
                        RGBA(174,163,147,0.5),
                        
                        RGBA(136,126,114,0.5),
                        
                        RGBA(94,88,81,0.5),
                        
                        RGBA(117,106,95,0.5),
                        
                        RGBA(154,143,130,0.5),
                        
                        RGBA(224,209,196,0.5),
                        
                        RGBA(198,185,175,0.5),
                        
                        RGBA(158,136,123,0.5),
                        
                        RGBA(117,97,86,0.5),
                        
                        RGBA(137,115,104,0.5),
                        
                        RGBA(176,151,138,0.5),
                        
                        RGBA(220,208,205,0.5),
                        
                        RGBA(195,185,183,0.5),
                        
                        RGBA(152,133,129,0.5),
                        
                        RGBA(115,96,93,0.5),
                        
                        RGBA(130,110,107,0.5),
                        
                        RGBA(169,148,146,0.5),
                        
                        RGBA(218,214,217,0.5),
                        
                        RGBA(192,187,191,0.5),
                        
                        RGBA(147,133,142,0.5),
                        
                        RGBA(107,92,101,0.5),
                        
                        RGBA(128,113,122,0.5),
                        
                        RGBA(161,152,163,0.5),
                        
                        RGBA(192,183,185,0.5),
                        
                        RGBA(172,165,166,0.5),
                        
                        RGBA(131,122,126,0.5),
                        
                        RGBA(95,87,90,0.5),
                        
                        RGBA(111,103,106,0.5),
                        
                        RGBA(146,139,142,0.5),
                        
                        RGBA(194,183,178,0.5),
                        
                        RGBA(176,162,158,0.5),
                        
                        RGBA(132,122,120,0.5),
                        
                        RGBA(96,86,84,0.5),
                        
                        RGBA(115,105,102,0.5),
                        
                        RGBA(153,141,138,0.5),
                        
                        RGBA(180,191,187,0.5),
                        
                        RGBA(156,186,164,0.5),
                        
                        RGBA(118,130,127,0.5),
                        
                        RGBA(83,90,88,0.5),
                        
                        RGBA(102,110,108,0.5),
                        
                        RGBA(137,147,145,0.5),
                        
                        RGBA(183,190,182,0.5),
                        
                        RGBA(162,167,160,0.5),
                        
                        RGBA(119,126,118,0.5),
                        
                        RGBA(86,91,86,0.5),
                        
                        RGBA(103,109,102,0.5),
                        
                        RGBA(139,146,139,0.5),
                        
                        RGBA(194,192,173,0.5),
                        
                        RGBA(173,170,155,0.5),
                        
                        RGBA(128,126,115,0.5),
                        
                        RGBA(93,91,83,0.5),
                        
                        RGBA(113,110,100,0.5),
                        
                        RGBA(147,145,130,0.5),
                        
                        RGBA(225,215,196,0.5),
                        
                        RGBA(200,190,172,0.5),
                        
                        RGBA(159,144,122,0.5),
                        
                        RGBA(116,102,87,0.5),
                        
                        RGBA(139,123,105,0.5),
                        
                        RGBA(178,161,136,0.5),
                        
                        RGBA(177,163,135,0.5),
                        
                        RGBA(184,154,117,0.5),
                        
                        RGBA(135,111,84,0.5),
                        
                        RGBA(94,73,56,0.5),
                        
                        RGBA(115,93,70,0.5),
                        
                        RGBA(155,129,97,0.5),
                        
                        RGBA(176,141,77,0.5),
                        
                        RGBA(182,137,80,0.5),
                        
                        RGBA(105,88,57,0.5),
                        
                        RGBA(108,84,52,0.5),
                        
                        RGBA(110,83,54,0.5),
                        
                        RGBA(118,82,59,0.5),
                        
                        RGBA(134,124,69,0.5),
                        
                        RGBA(96,89,56,0.5),
                        
                        RGBA(87,87,57,0.5),
                        
                        RGBA(72,87,62,0.5),
                        
                        RGBA(57,86,64,0.5),
                        
                        RGBA(56,74,60,0.5),
                        
                        RGBA(82,88,77,0.5),
                        
                        RGBA(89,86,72,0.5),
                        
                        RGBA(74,87,83,0.5),
                        
                        RGBA(60,66,56,0.5),
                        
                        RGBA(54,66,62,0.5),
                        
                        RGBA(65,66,56,0.5),
                        
                        RGBA(68,66,56,0.5),
                        
                        RGBA(73,66,55,0.5),
                        
                        RGBA(72,71,65,0.5),
                        
                        RGBA(79,72,66,0.5),
                        
                        RGBA(65,69,65,0.5),
                        
                        RGBA(61,67,66,0.5),
                        
                        RGBA(86,81,81,0.5),
                        
                        RGBA(101,97,97,0.5),
                        
                        RGBA(96,100,102,0.5),
                        
                        RGBA(103,101,97,0.5),
                        
                        RGBA(97,102,100,0.5),
                        
                        RGBA(86,84,80,0.5),
                        
                        RGBA(89,77,85,0.5),
                        
                        RGBA(101,81,72,0.5),
                        
                        RGBA(97,79,76,0.5),
                        
                        RGBA(76,67,64,0.5),
                        
                        RGBA(72,65,68,0.5),
                        
                        RGBA(64,62,68,0.5),
                        
                        RGBA(95,73,55,0.5),
                        
                        RGBA(78,67,57,0.5),
                        
                        RGBA(77,63,56,0.5),
                        
                        RGBA(94,66,57,0.5),
                        
                        RGBA(82,55,52,0.5),
                        
                        RGBA(71,57,56,0.5),
                        
                        RGBA(124,70,58,0.5),
                        
                        RGBA(145,84,80,0.5),
                        
                        RGBA(95,52,49,0.5),
                        
                        RGBA(108,59,62,0.5),
                        
                        RGBA(98,53,67,0.5),
                        
                        RGBA(134,76,86,0.5),
                        
                        RGBA(219,114,89,0.5),
                        
                        RGBA(226,110,108,0.5),
                        
                        RGBA(205,84,82,0.5),
                        
                        RGBA(143,53,50,0.5),
                        
                        RGBA(180,48,47,0.5),
                        
                        RGBA(215,123,137,0.5),
                        
                        RGBA(245,148,75,0.5),
                        
                        RGBA(242,148,75,0.5),
                        
                        RGBA(234,127,80,0.5),
                        
                        RGBA(212,81,53,0.5),
                        
                        RGBA(184,78,57,0.5),
                        
                        RGBA(242,124,99,0.5),
                        
                        RGBA(234,207,78,0.5),
                        
                        RGBA(242,186,74,0.5),
                        
                        RGBA(248,175,70,0.5),
                        
                        RGBA(255,188,80,0.5),
                        
                        RGBA(250,163,76,0.5),
                        
                        RGBA(209,127,43,0.5),
                        
                        RGBA(255,198,77,0.5),
                        
                        RGBA(253,195,47,0.5),
                        
                        RGBA(237,170,0,0.5),
                        
                        RGBA(170,126,49,0.5),
                        
                        RGBA(199,144,40,0.5),
                        
                        RGBA(238,179,41,0.5),
                        
                        RGBA(244,206,72,0.5),
                        
                        RGBA(226,187,69,0.5),
                        
                        RGBA(191,156,54,0.5),
                        
                        RGBA(164,137,62,0.5),
                        
                        RGBA(186,144,36,0.5),
                        
                        RGBA(219,179,41,0.5),
                        
                        RGBA(212,199,93,0.5),
                        
                        RGBA(203,189,67,0.5),
                        
                        RGBA(167,149,37,0.5),
                        
                        RGBA(130,118,54,0.5),
                        
                        RGBA(147,135,49,0.5),
                        
                        RGBA(173,159,55,0.5),
                        
                        RGBA(187,193,99,0.5),
                        
                        RGBA(182,186,77,0.5),
                        
                        RGBA(127,127,52,0.5),
                        
                        RGBA(99,100,60,0.5),
                        
                        RGBA(113,115,57,0.5),
                        
                        RGBA(143,143,50,0.5),
                        
                        RGBA(157,198,102,0.5),
                        
                        RGBA(144,184,91,0.5),
                        
                        RGBA(97,124,60,0.5),
                        
                        RGBA(80,99,62,0.5),
                        
                        RGBA(85,108,62,0.5),
                        
                        RGBA(106,140,57,0.5),
                        
                        RGBA(124,191,129,0.5),
                        
                        RGBA(109,189,119,0.5),
                        
                        RGBA(37,103,58,0.5),
                        
                        RGBA(47,82,58,0.5),
                        
                        RGBA(50,97,62,0.5),
                        
                        RGBA(68,150,91,0.5),
                        
                        RGBA(70,186,145,0.5),
                        
                        RGBA(64,163,130,0.5),
                        
                        RGBA(42,138,108,0.5),
                        
                        RGBA(36,94,75,0.5),
                        
                        RGBA(0,108,82,0.5),
                        
                        RGBA(0,151,111,0.5),
                        
                        RGBA(42,160,152,0.5),
                        
                        RGBA(0,152,142,0.5),
                        
                        RGBA(0,110,104,0.5),
                        
                        RGBA(16,87,83,0.5),
                        
                        RGBA(27,96,92,0.5),
                        
                        RGBA(24,137,130,0.5),
                        
                        RGBA(0,163,188,0.5),
                        
                        RGBA(0,145,170,0.5),
                        
                        RGBA(0,104,124,0.5),
                        
                        RGBA(11,81,93,0.5),
                        
                        RGBA(0,85,98,0.5),
                        
                        RGBA(23,130,152,0.5),
                        
                        RGBA(0,165,207,0.5),
                        
                        RGBA(0,126,166,0.5),
                        
                        RGBA(0,95,125,0.5),
                        
                        RGBA(20,79,99,0.5),
                        
                        RGBA(0,86,110,0.5),
                        
                        RGBA(0,103,132,0.5),
                        
                        RGBA(23,129,186,0.5),
                        
                        RGBA(0,121,181,0.5),
                        
                        RGBA(0,89,134,0.5),
                        
                        RGBA(24,71,98,0.5),
                        
                        RGBA(0,79,113,0.5),
                        
                        RGBA(0,103,155,0.5),
                        
                        RGBA(57,123,189,0.5),
                        
                        RGBA(30,98,163,0.5),
                        
                        RGBA(21,81,137,0.5),
                        
                        RGBA(45,79,117,0.5),
                        
                        RGBA(38,83,131,0.5),
                        
                        RGBA(22,90,151,0.5),
                        
                        RGBA(106,136,200,0.5),
                        
                        RGBA(89,114,182,0.5),
                        
                        RGBA(62,85,153,0.5),
                        
                        RGBA(48,60,98,0.5),
                        
                        RGBA(60,79,134,0.5),
                        
                        RGBA(81,102,161,0.5),
                        
                        RGBA(167,167,218,0.5),
                        
                        RGBA(126,121,184,0.5),
                        
                        RGBA(74,70,123,0.5),
                        
                        RGBA(66,62,92,0.5),
                        
                        RGBA(71,65,108,0.5),
                        
                        RGBA(103,94,156,0.5),
                        
                        RGBA(207,127,170,0.5),
                        
                        RGBA(159,105,156,0.5),
                        
                        RGBA(109,85,126,0.5),
                        
                        RGBA(121,90,144,0.5),
                        
                        RGBA(102,94,157,0.5),
                        
                        RGBA(94,89,134,0.5),
                        
                        RGBA(50,50,52,0.5),
                        
                        RGBA(72,77,84,0.5),
                        
                        RGBA(101,101,100,0.5),
                        
                        RGBA(114,118,121,0.5),
                        
                        RGBA(120,129,136,0.5),
                        
                        RGBA(138,138,137,0.5),
                        
                        RGBA(149,154,156,0.5),
                        
                        RGBA(172,171,169,0.5),
                        
                        RGBA(178,185,189,0.5),
                        
                        RGBA(192,197,201,0.5),
                        
                        RGBA(214,217,218,0.5),
                        
                        RGBA(226,229,227,0.5),
                        
                        RGBA(246,228,214,0.5),
                        
                        RGBA(243,234,228,0.5),
                        
                        RGBA(236,225,216,0.5),
                        
                        RGBA(239,232,231,0.5),
                        
                        RGBA(231,229,230,0.5),
                        
                        RGBA(231,233,232,0.5),
                        
                        RGBA(242,238,231,0.5),
                        
                        RGBA(241,235,225,0.5),
                        
                        RGBA(244,233,223,0.5),
                        
                        RGBA(235,227,218,0.5),
                        
                        RGBA(225,218,210,0.5),
                        
                        RGBA(220,216,213,0.5),
                        
                        RGBA(242,236,219,0.5),
                        
                        RGBA(242,239,226,0.5),
                        
                        RGBA(241,230,215,0.5),
                        
                        RGBA(244,233,215,0.5),
                        
                        RGBA(242,237,224,0.5),
                        
                        RGBA(246,237,219,0.5),
                        
                        RGBA(239,237,230,0.5),
                        
                        RGBA(237,237,228,0.5),
                        
                        RGBA(244,240,225,0.5),
                        
                        RGBA(238,235,220,0.5),
                        
                        RGBA(240,237,225,0.5),
                        
                        RGBA(243,237,221,0.5),
                        
                        RGBA(240,239,238,0.5),
                        
                        RGBA(231,233,220,0.5),
                        
                        RGBA(234,235,222,0.5),
                        
                        RGBA(235,239,230,0.5),
                        
                        RGBA(232,237,227,0.5),
                        
                        RGBA(232,234,228,0.5),
                        
                        RGBA(233,235,233,0.5),
                        
                        RGBA(231,236,232,0.5),
                        
                        RGBA(228,238,235,0.5),
                        
                        RGBA(219,229,229,0.5),
                        
                        RGBA(224,231,231,0.5),
                        
                        RGBA(218,226,229,0.5),
                        
                        RGBA(231,236,234,0.5),
                        
                        RGBA(221,222,215,0.5),
                        
                        RGBA(220,216,205,0.5),
                        
                        RGBA(207,204,196,0.5),
                        
                        RGBA(206,206,200,0.5),
                        
                        RGBA(223,218,201,0.5),
                        
                        RGBA(228,234,231,0.5),
                        
                        RGBA(229,233,227,0.5),
                        
                        RGBA(227,232,228,0.5),
                        
                        RGBA(213,219,217,0.5),
                        
                        RGBA(210,216,217,0.5),
                        
                        RGBA(200,205,203,0.5),
                        
                        RGBA(238,235,230,0.5),
                        
                        RGBA(220,218,215,0.5),
                        
                        RGBA(184,189,195,0.5),
                        
                        RGBA(155,162,174,0.5),
                        
                        RGBA(165,164,171,0.5),
                        
                        RGBA(187,185,190,0.5),
                        
                        RGBA(205,205,202,0.5),
                        
                        RGBA(197,203,204,0.5),
                        
                        RGBA(184,190,194,0.5),
                        
                        RGBA(160,167,173,0.5),
                        
                        RGBA(181,181,179,0.5),
                        
                        RGBA(194,192,189,0.5),
                        
                        RGBA(238,228,218,0.5),
                        
                        RGBA(228,223,219,0.5),
                        
                        RGBA(219,204,192,0.5),
                        
                        RGBA(206,201,198,0.5),
                        
                        RGBA(201,188,183,0.5),
                        
                        RGBA(205,200,194,0.5),
                        
                        RGBA(240,230,216,0.5),
                        
                        RGBA(241,227,211,0.5),
                        
                        RGBA(249,230,206,0.5),
                        
                        RGBA(237,222,203,0.5),
                        
                        RGBA(228,203,179,0.5),
                        
                        RGBA(216,193,171,0.5),
                        
                        RGBA(246,225,230,0.5),
                        
                        RGBA(248,215,216,0.5),
                        
                        RGBA(244,195,210,0.5),
                        
                        RGBA(233,190,204,0.5),
                        
                        RGBA(237,190,210,0.5),
                        
                        RGBA(229,177,189,0.5),
                        
                        RGBA(243,214,214,0.5),
                        
                        RGBA(242,211,215,0.5),
                        
                        RGBA(250,203,210,0.5),
                        
                        RGBA(244,193,195,0.5),
                        
                        RGBA(241,181,185,0.5),
                        
                        RGBA(228,176,180,0.5),
                        
                        RGBA(247,227,221,0.5),
                        
                        RGBA(249,217,211,0.5),
                        
                        RGBA(247,203,206,0.5),
                        
                        RGBA(241,192,191,0.5),
                        
                        RGBA(234,179,181,0.5),
                        
                        RGBA(233,174,173,0.5),
                        
                        RGBA(236,227,222,0.5),
                        
                        RGBA(247,218,206,0.5),
                        
                        RGBA(248,213,206,0.5),
                        
                        RGBA(242,196,189,0.5),
                        
                        RGBA(243,188,179,0.5),
                        
                        RGBA(238,179,174,0.5),
                        
                        RGBA(246,225,210,0.5),
                        
                        RGBA(245,214,205,0.5),
                        
                        RGBA(253,204,185,0.5),
                        
                        RGBA(243,187,173,0.5),
                        
                        RGBA(238,182,167,0.5),
                        
                        RGBA(206,162,154,0.5),
                        
                        RGBA(251,221,204,0.5),
                        
                        RGBA(253,217,189,0.5),
                        
                        RGBA(251,205,174,0.5),
                        
                        RGBA(251,201,175,0.5),
                        
                        RGBA(234,189,168,0.5),
                        
                        RGBA(237,188,163,0.5),
                        
                        RGBA(231,230,225,0.5),
                        
                        RGBA(246,228,203,0.5),
                        
                        RGBA(243,213,179,0.5),
                        
                        RGBA(233,206,176,0.5),
                        
                        RGBA(236,201,160,0.5),
                        
                        RGBA(223,201,177,0.5),
                        
                        RGBA(237,234,231,0.5),
                        
                        RGBA(242,225,204,0.5),
                        
                        RGBA(253,223,189,0.5),
                        
                        RGBA(255,216,174,0.5),
                        
                        RGBA(252,210,170,0.5),
                        
                        RGBA(254,203,153,0.5),
                        
                        RGBA(251,231,192,0.5),
                        
                        RGBA(252,227,190,0.5),
                        
                        RGBA(254,224,177,0.5),
                        
                        RGBA(255,222,168,0.5),
                        
                        RGBA(255,221,168,0.5),
                        
                        RGBA(255,216,157,0.5),
                        
                        RGBA(247,238,207,0.5),
                        
                        RGBA(248,237,199,0.5),
                        
                        RGBA(249,234,189,0.5),
                        
                        RGBA(251,232,177,0.5),
                        
                        RGBA(252,228,175,0.5),
                        
                        RGBA(246,216,168,0.5),
                        
                        RGBA(245,238,211,0.5),
                        
                        RGBA(236,235,192,0.5),
                        
                        RGBA(236,232,182,0.5),
                        
                        RGBA(230,233,176,0.5),
                        
                        RGBA(241,234,175,0.5),
                        
                        RGBA(229,228,167,0.5),
                        
                        RGBA(247,232,178,0.5),
                        
                        RGBA(235,235,192,0.5),
                        
                        RGBA(228,232,184,0.5),
                        
                        RGBA(220,235,184,0.5),
                        
                        RGBA(215,234,187,0.5),
                        
                        RGBA(220,228,167,0.5),
                        
                        RGBA(233,236,219,0.5),
                        
                        RGBA(229,242,222,0.5),
                        
                        RGBA(215,236,210,0.5),
                        
                        RGBA(217,230,201,0.5),
                        
                        RGBA(207,213,179,0.5),
                        
                        RGBA(203,223,190,0.5),
                        
                        RGBA(231,241,215,0.5),
                        
                        RGBA(202,231,182,0.5),
                        
                        RGBA(189,216,184,0.5),
                        
                        RGBA(190,229,188,0.5),
                        
                        RGBA(189,232,198,0.5),
                        
                        RGBA(184,219,187,0.5),
                        
                        RGBA(219,242,228,0.5),
                        
                        RGBA(202,227,200,0.5),
                        
                        RGBA(185,221,193,0.5),
                        
                        RGBA(182,223,195,0.5),
                        
                        RGBA(173,221,198,0.5),
                        
                        RGBA(168,228,202,0.5),
                        
                        RGBA(195,226,217,0.5),
                        
                        RGBA(185,223,217,0.5),
                        
                        RGBA(176,217,207,0.5),
                        
                        RGBA(166,226,218,0.5),
                        
                        RGBA(157,220,221,0.5),
                        
                        RGBA(157,216,223,0.5),
                        
                        RGBA(219,239,231,0.5),
                        
                        RGBA(185,227,228,0.5),
                        
                        RGBA(187,220,218,0.5),
                        
                        RGBA(168,213,211,0.5),
                        
                        RGBA(164,213,207,0.5),
                        
                        RGBA(162,208,212,0.5),
                        
                        RGBA(224,232,226,0.5),
                        
                        RGBA(214,229,226,0.5),
                        
                        RGBA(187,207,201,0.5),
                        
                        RGBA(169,200,205,0.5),
                        
                        RGBA(157,200,206,0.5),
                        
                        RGBA(160,197,214,0.5),
                        
                        RGBA(222,234,234,0.5),
                        
                        RGBA(197,219,222,0.5),
                        
                        RGBA(184,206,213,0.5),
                        
                        RGBA(167,200,208,0.5),
                        
                        RGBA(159,204,213,0.5),
                        
                        RGBA(172,199,206,0.5),
                        
                        RGBA(221,235,230,0.5),
                        
                        RGBA(197,223,225,0.5),
                        
                        RGBA(167,215,233,0.5),
                        
                        RGBA(161,213,224,0.5),
                        
                        RGBA(163,204,217,0.5),
                        
                        RGBA(149,197,216,0.5),
                        
                        RGBA(215,223,226,0.5),
                        
                        RGBA(198,223,233,0.5),
                        
                        RGBA(196,219,234,0.5),
                        
                        RGBA(170,201,229,0.5),
                        
                        RGBA(161,195,218,0.5),
                        
                        RGBA(165,194,207,0.5),
                        
                        RGBA(197,212,223,0.5),
                        
                        RGBA(184,208,222,0.5),
                        
                        RGBA(181,195,208,0.5),
                        
                        RGBA(183,200,217,0.5),
                        
                        RGBA(171,201,225,0.5),
                        
                        RGBA(165,194,211,0.5),
                        
                        RGBA(191,215,225,0.5),
                        
                        RGBA(175,210,229,0.5),
                        
                        RGBA(171,200,213,0.5),
                        
                        RGBA(174,196,206,0.5),
                        
                        RGBA(175,201,218,0.5),
                        
                        RGBA(169,196,218,0.5),
                        
                        RGBA(235,237,231,0.5),
                        
                        RGBA(207,223,228,0.5),
                        
                        RGBA(194,213,219,0.5),
                        
                        RGBA(183,194,199,0.5),
                        
                        RGBA(177,191,194,0.5),
                        
                        RGBA(177,186,188,0.5),
                        
                        RGBA(229,224,223,0.5),
                        
                        RGBA(217,215,219,0.5),
                        
                        RGBA(196,211,230,0.5),
                        
                        RGBA(185,196,216,0.5),
                        
                        RGBA(183,192,214,0.5),
                        
                        RGBA(184,194,221,0.5),
                        
                        RGBA(233,231,232,0.5),
                        
                        RGBA(211,208,226,0.5),
                        
                        RGBA(210,186,204,0.5),
                        
                        RGBA(194,192,218,0.5),
                        
                        RGBA(184,188,206,0.5),
                        
                        RGBA(176,196,220,0.5),
                        
                        RGBA(238,231,230,0.5),
                        
                        RGBA(222,203,215,0.5),
                        
                        RGBA(234,210,221,0.5),
                        
                        RGBA(234,200,218,0.5),
                        
                        RGBA(228,196,213,0.5),
                        
                        RGBA(211,187,206,0.5),
                        
                        RGBA(233,148,166,0.5),
                        
                        RGBA(223,113,131,0.5),
                        
                        RGBA(210,89,104,0.5),
                        
                        RGBA(191,55,61,0.5),
                        
                        RGBA(202,73,86,0.5),
                        
                        RGBA(227,126,146,0.5),
                        
                        RGBA(217,152,141,0.5),
                        
                        RGBA(196,118,105,0.5),
                        
                        RGBA(186,107,94,0.5),
                        
                        RGBA(148,73,56,0.5),
                        
                        RGBA(161,79,65,0.5),
                        
                        RGBA(209,137,124,0.5),
                        
                        RGBA(255,230,170,0.5),
                        
                        RGBA(255,211,119,0.5),
                        
                        RGBA(255,206,109,0.5),
                        
                        RGBA(245,174,57,0.5),
                        
                        RGBA(245,199,95,0.5),
                        
                        RGBA(245,218,137,0.5),
                        
                        RGBA(206,205,206,0.5),
                        
                        RGBA(192,192,192,0.5),
                        
                        RGBA(178,178,179,0.5),
                        
                        RGBA(163,164,164,0.5),
                        
                        RGBA(149,150,150,0.5),
                        
                        RGBA(136,136,136,0.5),
                        
                        RGBA(122,122,120,0.5),
                        
                        RGBA(109,109,109,0.5),
                        
                        RGBA(96,96,96,0.5),
                        
                        RGBA(84,84,84,0.5),
                        
                        RGBA(72,72,72,0.5),
                        
                        RGBA(61,61,62,0.5),

                        ];
    
    [colorCBCC enumerateObjectsUsingBlock:^(id  _Nonnull obj, NSUInteger idx, BOOL * _Nonnull stop) {
        if ((idx + 1) % 6 == 0) {
            [self.dataArray addObject:obj];
        }
    }];
}

- (void)updateFilterViewWithImage:(UIImage *)image
{
    self.drawImgView.image = image;
    [self configureData:image];
    [self.collectionView reloadData];
}

#pragma mark - UICollectionViewDataSource

- (NSInteger)numberOfSectionsInCollectionView:(UICollectionView *)collectionView
{
    return 1;
}

- (NSInteger)collectionView:(UICollectionView *)collectionView numberOfItemsInSection:(NSInteger)section {
    return self.dataArray.count;
}


- (__kindof UICollectionViewCell *)collectionView:(UICollectionView *)collectionView cellForItemAtIndexPath:(NSIndexPath *)indexPath {
    
    StoryMakeFooterFilterCell *cell = [collectionView dequeueReusableCellWithReuseIdentifier:[StoryMakeFooterFilterCell identifierForReuseCell] forIndexPath:indexPath];
    
    if (indexPath.section >= self.dataArray.count) {
        return cell;
    }
    
    cell.imageView.image = self.currentImage;
    cell.color  = (UIColor *)self.dataArray[indexPath.row];
    cell.viewFilter.backgroundColor = cell.color;

    
    if (indexPath.row == 0) {
        cell.filterNameLabel.text = CLocalizedString(@"Normal");
    } else {
        cell.filterNameLabel.text = [NSString stringWithFormat:@"%02d", (int)(indexPath.row + 10)];
    }
    
    if (self.currentCellIndex == (NSInteger)indexPath.row) {
          cell.imageView.layer.borderColor = [UIColor redColor].CGColor;
    } else {
          cell.imageView.layer.borderColor = [UIColor whiteColor].CGColor;
    }
    

    
    return cell;
}

- (void)collectionView:(UICollectionView *)collectionView didSelectItemAtIndexPath:(NSIndexPath *)indexPath {
    StoryMakeFooterFilterCell *cell = (StoryMakeFooterFilterCell *)[collectionView cellForItemAtIndexPath:indexPath];
    self.drawImgView.image = [ImageUtil imageWithImage:self.currentImage color:cell.color];
    cell.imageView.layer.borderColor = [UIColor redColor].CGColor;
    self.currentCellIndex = (NSInteger)indexPath.row;
    [self.collectionView reloadData];
//    if (cell.imageView.image) {
//        self.drawImgView.image = cell.imageView.image;
//    }
}


#pragma mark -
#pragma mark - Btn action

- (void)cancelBtnAction
{
    if (self.delegate && [self.delegate respondsToSelector:@selector(storyMakeFilterFooterViewCloseBtnClicked)]) {
        [self.delegate storyMakeFilterFooterViewCloseBtnClicked];
    }
}

- (void)confirmBtnAction
{
    // ä¿å­å½åçå¾ç
    [self saveImageToPhotos:self.drawImgView.image];
    
//    if (self.delegate && [self.delegate respondsToSelector:@selector(storyMakeFilterFooterViewConfirmBtnClicked:)]) {
//        [self.delegate storyMakeFilterFooterViewConfirmBtnClicked:self.drawImgView.image];
//    }
}

- (void)saveImageToPhotos:(UIImage*)savedImage
{
    [YLSVProgressHUD showMessage:nil];
    UIImageWriteToSavedPhotosAlbum(savedImage, self, @selector(image:didFinishSavingWithError:contextInfo:), NULL);
}

// æå®åè°æ¹æ³
- (void)image: (UIImage *) image didFinishSavingWithError: (NSError *) error contextInfo: (void *) contextInfo
{
//    NSString *msg = nil ;
    if(error != NULL){
        //        msg =CLocalizedString(@"Failed to save image");
        
        [YLSVProgressHUD showError:nil];
    }else{
        [YLSVProgressHUD showSuccess:nil];
        if (self.delegate && [self.delegate respondsToSelector:@selector(storyMakeFilterFooterViewConfirmBtnClicked:)]) {
            [self.delegate storyMakeFilterFooterViewConfirmBtnClicked:self.drawImgView.image];
        }
    }
}

#pragma mark -
#pragma mark - Getter

- (UIImageView *)drawImgView
{
    if (!_drawImgView) {
        _drawImgView = [[UIImageView alloc] init];
        _drawImgView.contentMode = UIViewContentModeScaleAspectFit;
        _drawImgView.backgroundColor = [UIColor blackColor];
        _drawImgView.userInteractionEnabled = YES;
    }
    return _drawImgView;
}

- (UIButton *)cancelBtn {
    if(!_cancelBtn) {
        _cancelBtn = [[UIButton alloc] init];
        [_cancelBtn setTitle:@"Cancel" forState:UIControlStateNormal];
        [_cancelBtn setTitleColor:UIColorFromRGBA(255, 255, 255, 1.0) forState:UIControlStateNormal];
        _cancelBtn.titleLabel.font = [StoryMakerFontManager getFontFutura:SCREENAPPLYHEIGHT(16)];
        _cancelBtn.titleLabel.textAlignment = NSTextAlignmentLeft;
        [_cancelBtn addTarget:self action:@selector(cancelBtnAction) forControlEvents:UIControlEventTouchUpInside];
    }
    return _cancelBtn;
}

- (UIButton *)confirmBtn {
    if(!_confirmBtn) {
        _confirmBtn = [[UIButton alloc] init];
        [_confirmBtn setTitle:@"Save" forState:UIControlStateNormal];
        [_confirmBtn setTitleColor:UIColorFromRGBA(255, 255, 255, 1.0) forState:UIControlStateNormal];
        _confirmBtn.titleLabel.font = [StoryMakerFontManager getFontFutura:SCREENAPPLYHEIGHT(16)];
        _confirmBtn.titleLabel.textAlignment = NSTextAlignmentRight;
        [_confirmBtn addTarget:self action:@selector(confirmBtnAction) forControlEvents:UIControlEventTouchUpInside];
    }
    return _confirmBtn;
}

- (UICollectionView *)collectionView {
    if (!_collectionView) {
        _collectionView = [[UICollectionView alloc] initWithFrame:CGRectZero
                                             collectionViewLayout:self.flowLayout];
        _collectionView.backgroundColor = [UIColor clearColor];
        _collectionView.delegate = self;
        _collectionView.dataSource = self;
        [_collectionView registerClass:[StoryMakeFooterFilterCell class]
            forCellWithReuseIdentifier:[StoryMakeFooterFilterCell identifierForReuseCell]];
    }
    
    return _collectionView;
}

-(UICollectionViewFlowLayout *)flowLayout {
    if (!_flowLayout) {
        _flowLayout = [[UICollectionViewFlowLayout alloc] init];
        _flowLayout.itemSize = CGSizeMake(SCREENAPPLYSPACE(50), SCREENAPPLYSPACE(75));
        _flowLayout.sectionInset = UIEdgeInsetsMake(0, SCREENAPPLYSPACE(16), SCREENAPPLYSPACE(24), SCREENAPPLYSPACE(16));
        _flowLayout.scrollDirection = UICollectionViewScrollDirectionHorizontal;
    }
    
    return _flowLayout;
}


@end
